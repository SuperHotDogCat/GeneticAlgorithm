<h1>解く問題</h1>
<h2><a href="https://atcoder.jp/contests/tessoku-book/tasks/tessoku_book_aw">A49 - Heuristic 2</a></h2>

# プログラムの解説
DarwinアルゴリズムはWikipediaに記載のあったアルゴリズムに従って実装を行った。
assignment5_darwin.pyの上記に述べた基本的な実装方針を再度記しておく。

```
Wikipediaの実装例に従って実装を行う。

遺伝的アルゴリズムは一般に以下の流れで実装される。なお、下記では個体数を N, 最大世代数を G と置く。
あらかじめ N 個の個体が入る集合を二つ用意する。以下、この二つの集合を「現世代」、「次世代」と呼ぶことにする。
現世代に N 個の個体をランダムに生成する。
評価関数により、現世代の各個体の適応度をそれぞれ計算する。
ある確率で次の3つの動作のどれかを行い、その結果を次世代に保存する。
個体を一つ選択アルゴリズムで選択する
個体を二つ選択（選択方法は後述）して交叉（後述）を行う。
個体を一つ選択して突然変異（後述）を行う。
次世代の個体数が N 個になるまで上記の動作を繰り返す。
次世代の個体数が N 個になったら次世代の内容を全て現世代に移す。
3. 以降の動作を最大世代数 G 回まで繰り返し、最終的に「現世代」の中で最も適応度の高い個体を「解」として出力する。

この時交叉は突然変異する確率より非常に大きいと考える
選択確率: 94%, 交叉確率: 5%, 突然変異:1%

この問題では3種類のGAを比較するのが目的なので、同じ選択法・個体数を使用して成績を比較する
選択法: トーナメント法(5個取り出す)
個体数: 50とする
世代数: 100
```

これに従って実装を行った。
それぞれの関数の説明を行う。
<p>
- make_args
</p>
<p>
pythonファイル実行のための引数を指定する関数
</p>
<p>
- selection
</p>
<p>
selection_n(デフォルトでは5)体の個体を選んで一番スコアの高い固体を次世代に引き継がせる選択アルゴリズムを実行する関数
個体の選び方は非復元抽出とした
</p>
<p>
- crossover
</p>
<p>
2体の個体と, 遺伝子配列のindexを指すidx1, idx2を受け取り, 2体の個体のうちidx1からidx2までの遺伝子配列を交換する交叉アルゴリズムを実行する関数
</p>
<p>
- exe_crossover
</p>
<p>
実際に交叉アルゴリズムをmain関数内で行う時の関数, プログラム設計の際に, 複雑なプログラムにならないようにcrossover関数とわざわざ分割した。
</p>
<p>
- mutation
</p>
<p>
突然変異アルゴリズムのこと。今回は遺伝子配列の実態を1と-1の並びで表したため, -1をかけることで突然変異を表現している。
</p>
<p>
- calc_score
</p>
<p>
At coder典型90のA49 - Heuristic 2のスコアを計算するための関数。
</p>
<p>
- translate_entity
</p>
<p>
個体の遺伝子配列をA, Bに変換して描画する関数, デバック用
</p>
<p>
- create_first_gen
</p>
<p>
個体の初期化関数
</p>
<p>
-testcode
</p>
<p>
ここまでの関数が正しく動作していることを確認するテストコード
</p>
<p>
- climbing_score(baldwinとlamarckのみ)
</p>
<p>
山登り法を用いてスコアを計算するアルゴリズム, ただし, 計算時間の増加を懸念して今回の山登りアルゴリズムは遺伝子を1組swapする操作をして最大値をとったものをスコア, 獲得形質を獲得した個体とした。
</p>

# 結果
<p>
結果はdarwin0.png, baldwin0.png, lamarck0.pngの通りである。
</p>
<p>
計算時間はdarwinが1秒未満, baldwin, lamarckはアルゴリズムがほぼ同じなので1時間程度であった。
</p>
<p>
darwinは計算時間が早いもののスコアは650より少し高いぐらいであり, 得られた解の品質はよくなかった。
</p>
<p>
baldwinは計算時間は1時間程度かかるものの, 750程度のスコアが見られ, darwinからの改善が見られた。このことから子供が高スコアになる個体を選択していくといいスコアが得られることがわかる。
</p>
<p>
lamarckは計算時間は1時間程度かかるものの, 900程度のスコアが見られ, 三種類のアルゴリズムの中では最もいいスコアであった。しかし, 20世帯前後で値がほとんど変わらないことから早期に収束していることが考えられる。
</p>
<p>
局所解にはまっていないかを考えるために, darwin進化を100000世代, 100個体で回したものをdarwin_gen100000_n_100.pngに残しておいた。この時の実行時間は1時間程度であり, baldwinとlamarckと同じ程度であった。
</p>
<p>
結果は800スコア程度であり, 同じ計算時間で800程度のスコアを狙うならbaldwinよりもdarwinの方が良いことがわかった。しかし, darwin_gen100000_n_100.pngを見るとわかるように, darwin進化もスコアの伸びが止まっており, これ以上のスコア改善は期待できなさそうである。
</p>